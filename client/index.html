<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    
    <!-- ESA Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://plausible.io">
    <link rel="dns-prefetch" href="https://maps.googleapis.com">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#7c3aed">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Life CEO">
    <link rel="apple-touch-icon" href="/life-ceo-icon-192.png">
    
    <script>
      const domain = window.location.hostname.includes('replit.dev')
        ? 'mundo-tango.replit.dev'
        : 'mundotango.life';
      const script = document.createElement('script');
      script.setAttribute('defer', '');
      script.setAttribute('data-domain', domain);
      script.src = 'https://plausible.io/js/script.file-downloads.hash.outbound-links.pageview-props.revenue.tagged-events.js';
      document.head.appendChild(script);

      window.plausible = window.plausible || function () {
        (window.plausible.q = window.plausible.q || []).push(arguments)
      }
    </script>
    
    <!-- Google Maps API for Community World Map -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDNTpCEGecFMPYg_1OOYiAFn9z6dCr0X8Y&libraries=places"></script>
    
    <!-- ESA LIFE CEO 56x21: Cloudinary Upload Widget for 500MB+ videos -->
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script>
      // ESA LIFE CEO 61x21 - Layer 58: Use Server-Side Upload Instead of Widget
      window.CLOUDINARY_CONFIG = {
        cloudName: 'dwlfq9gec',
        useServerUpload: true, // Flag to use server-side upload
        apiKey: '216213869359644' // For signed uploads
      };
    </script>
  </head>
  <body>
    <!-- Life CEO 44x21s diagnostic removed - X-Frame-Options fix successful -->
    
    <div id="root"></div>
    
    <!-- Re-enable React app after X-Frame-Options fix -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- ESA Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('Service Worker registered'))
            .catch(err => console.log('Service Worker registration failed:', err));
        });
      }
    </script>
    
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>