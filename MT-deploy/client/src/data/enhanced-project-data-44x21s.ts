// Enhanced Project Data with 44x21s Framework Learnings (July 25-29, 2025)

export const enhancedProjectData44x21s = [
  {
    id: 'epic-1',
    title: 'Life CEO 44x21s Framework Evolution',
    type: 'Platform',
    priority: 'Highest',
    completion: 95,
    layer: 44,
    phase: 21,
    actualHours: 120,
    description: 'Evolution of Life CEO framework through real-world implementation challenges',
    labels: ['life-ceo', '44x21s', 'framework-evolution'],
    children: [
      {
        id: 'story-1',
        title: 'React Loading Crisis Resolution',
        type: 'Feature',
        priority: 'Highest',
        completion: 100,
        layer: 22,
        phase: 15,
        actualHours: 8,
        description: 'Systematic resolution of React app loading hangs using progressive enhancement methodology',
        acceptanceCriteria: [
          'Complex provider chains causing React initialization hangs resolved',
          'Progressive enhancement protocol implemented (Layer 1 → Layer 22+)',
          'Page load time reduced from infinite to <3 seconds',
          'Framework pattern documented for future use'
        ],
        labels: ['react', 'progressive-enhancement', 'crisis-resolution']
      },
      {
        id: 'story-2',
        title: 'Security Header Matrix Analysis',
        type: 'Feature',
        priority: 'High',
        completion: 100,
        layer: 31,
        phase: 18,
        actualHours: 6,
        description: 'Systematic security layer analysis resolving X-Frame-Options + CSP dual blocking',
        acceptanceCriteria: [
          'X-Frame-Options changed from DENY to SAMEORIGIN',
          'Content Security Policy disabled for iframe compatibility',
          'Security headers maintained for essential protection',
          'Replit preview fully operational'
        ],
        labels: ['security', 'iframe', 'csp', 'x-frame-options']
      },
      {
        id: 'story-3',
        title: 'Context Provider Dependencies Resolution',
        type: 'Feature',
        priority: 'High',
        completion: 100,
        layer: 25,
        phase: 16,
        actualHours: 4,
        description: 'React context error cascade resolution through minimal provider architecture',
        acceptanceCriteria: [
          'useTenant context errors resolved',
          'Minimal TenantProvider added without complex initialization',
          'Context dependency mapping implemented',
          'Component tree errors eliminated'
        ],
        labels: ['react-context', 'providers', 'dependencies']
      },
      {
        id: 'story-4',
        title: 'API Field Consistency Pattern Detection',
        type: 'Feature',
        priority: 'Medium',
        completion: 90,
        layer: 15,
        phase: 14,
        actualHours: 5,
        description: 'Automated detection and resolution of camelCase/snake_case API inconsistencies',
        acceptanceCriteria: [
          'Automatic field mapping validation implemented',
          'Client-server field mismatches prevented',
          'Silent API failures eliminated',
          'Debugging time reduced from hours to minutes'
        ],
        labels: ['api', 'field-mapping', 'automation']
      },
      {
        id: 'story-5',
        title: 'Memory Management Optimization Protocol',
        type: 'Feature',
        priority: 'Medium',
        completion: 100,
        layer: 12,
        phase: 13,
        actualHours: 3,
        description: 'Proactive memory allocation for JavaScript heap optimization',
        acceptanceCriteria: [
          'NODE_OPTIONS="--max_old_space_size=8192" implemented',
          'Build success rate improved to 100%',
          'JavaScript heap errors eliminated',
          'Large bundle builds successful'
        ],
        labels: ['memory', 'optimization', 'build']
      }
    ]
  },
  {
    id: 'epic-2',
    title: 'Framework Enhancement Implementation',
    type: 'Platform',
    priority: 'High',
    completion: 85,
    layer: 43,
    phase: 20,
    actualHours: 80,
    description: 'Implementation of new layers and phases based on real-world learnings',
    labels: ['framework', 'enhancement', 'layers', 'phases'],
    children: [
      {
        id: 'story-6',
        title: 'Layer 41-44 Implementation',
        type: 'Feature',
        priority: 'High',
        completion: 90,
        layer: 41,
        phase: 19,
        actualHours: 16,
        description: 'Implementation of enhanced framework layers for deduplication, mobile, AI, and validation',
        acceptanceCriteria: [
          'Layer 41: Deduplication and External Service Sync',
          'Layer 42: Mobile Wrapper Development (Capacitor)',
          'Layer 43: AI Self-Learning Pattern Recognition',
          'Layer 44: Continuous Validation Real-time Monitoring'
        ],
        labels: ['layers', 'deduplication', 'mobile', 'ai-learning', 'validation']
      },
      {
        id: 'story-7',
        title: 'Phase 0 and 21 Addition',
        type: 'Feature',
        priority: 'Medium',
        completion: 80,
        layer: 20,
        phase: 0,
        actualHours: 12,
        description: 'Pre-development checklist and mobile readiness phases',
        acceptanceCriteria: [
          'Phase 0: Pre-Development Checklist (LSP diagnostics, memory allocation)',
          'Phase 21: Mobile Readiness (Device testing, app store preparation)',
          'Framework lifecycle complete from pre-dev to mobile deployment'
        ],
        labels: ['phases', 'pre-development', 'mobile-readiness']
      },
      {
        id: 'story-8',
        title: 'Pattern Template Library',
        type: 'Feature',
        priority: 'Medium',
        completion: 70,
        layer: 43,
        phase: 17,
        actualHours: 20,
        description: 'Reusable solution templates based on implementation learnings',
        acceptanceCriteria: [
          'Progressive Enhancement Protocol documented',
          'Context Dependency Resolution template',
          'Security Layer Analysis protocol',
          'Memory Management Strategy template'
        ],
        labels: ['patterns', 'templates', 'reusable', 'documentation']
      }
    ]
  },
  {
    id: 'epic-3',
    title: 'Platform Operational Success',
    type: 'Platform',
    priority: 'High',
    completion: 92,
    layer: 44,
    phase: 21,
    actualHours: 200,
    description: 'Complete platform operational success with all systems working',
    labels: ['operational', 'platform', 'success', 'deployment'],
    children: [
      {
        id: 'story-9',
        title: 'Replit Preview Fully Operational',
        type: 'Feature',
        priority: 'Highest',
        completion: 100,
        layer: 44,
        phase: 21,
        actualHours: 24,
        description: 'Complete Replit preview functionality with React app display',
        acceptanceCriteria: [
          'React application fully operational in Replit preview',
          'Sub-3 second render times maintained',
          'All security headers properly configured',
          'AI Chat functionality working'
        ],
        labels: ['replit', 'preview', 'operational', 'react']
      },
      {
        id: 'story-10',
        title: 'Performance Optimization Complete',
        type: 'Feature',
        priority: 'High',
        completion: 95,
        layer: 12,
        phase: 18,
        actualHours: 40,
        description: '72% performance improvement achieved through systematic optimization',
        acceptanceCriteria: [
          'Render time improved from 11.3s to 3.2s (72% improvement)',
          'Bundle size reduced from 31MB to 0.16MB (99.5% reduction)',
          'Cache hit rate 60-70% on repeated requests',
          'All optimization services operational'
        ],
        labels: ['performance', 'optimization', 'speed', 'caching']
      },
      {
        id: 'story-11',
        title: 'Database Security Implementation',
        type: 'Feature',
        priority: 'High',
        completion: 88,
        layer: 21,
        phase: 19,
        actualHours: 32,
        description: 'Enterprise-grade database security with RLS and audit logging',
        acceptanceCriteria: [
          '40 tables with Row Level Security enabled',
          'Comprehensive audit logging system',
          '99.07% cache hit ratio achieved',
          'Production-ready security monitoring'
        ],
        labels: ['database', 'security', 'rls', 'audit']
      },
      {
        id: 'story-12',
        title: 'AI Chat CSRF Resolution',
        type: 'Feature',
        priority: 'Medium',
        completion: 100,
        layer: 18,
        phase: 17,
        actualHours: 16,
        description: 'Complete AI chat functionality with CSRF protection bypass',
        acceptanceCriteria: [
          'CSRF middleware enhanced to bypass /api/ai/ paths',
          'Dedicated AI chat endpoints with Supabase integration',
          'Real-time chat interface operational',
          'Comprehensive error handling implemented'
        ],
        labels: ['ai-chat', 'csrf', 'security', 'real-time']
      }
    ]
  },
  {
    id: 'epic-4',
    title: 'Design System and UI Excellence',
    type: 'Platform',
    priority: 'Medium',
    completion: 88,
    layer: 7,
    phase: 16,
    actualHours: 120,
    description: 'MT ocean theme implementation and UI consistency',
    labels: ['design', 'ui', 'mt-ocean', 'consistency'],
    children: [
      {
        id: 'story-13',
        title: 'MT Ocean Theme Implementation',
        type: 'Feature',
        priority: 'Medium',
        completion: 95,
        layer: 7,
        phase: 16,
        actualHours: 40,
        description: 'Complete MT ocean theme with glassmorphic design',
        acceptanceCriteria: [
          'Turquoise-to-cyan gradient implementation',
          'Glassmorphic cards with backdrop blur',
          '70-20-10 design rule (light/accent/vibrant)',
          '100% MT compliance across major pages'
        ],
        labels: ['mt-ocean', 'glassmorphic', 'design-system']
      },
      {
        id: 'story-14',
        title: 'Comprehensive Site Audit',
        type: 'Feature',
        priority: 'Medium',
        completion: 85,
        layer: 8,
        phase: 15,
        actualHours: 32,
        description: 'Complete platform audit with scoring methodology',
        acceptanceCriteria: [
          '13 major pages audited with detailed scoring',
          'Overall platform score 82/100',
          'TypeScript errors identified and documented',
          'Individual audit reports created'
        ],
        labels: ['audit', 'scoring', 'quality-assurance']
      }
    ]
  },
  {
    id: 'epic-5',
    title: 'JIRA Integration and Project Management',
    type: 'Platform',
    priority: 'High',
    completion: 90,
    layer: 35,
    phase: 20,
    actualHours: 60,
    description: 'Complete JIRA integration with 44x21s framework mapping',
    labels: ['jira', 'integration', 'project-management', '44x21s'],
    children: [
      {
        id: 'story-15',
        title: 'JIRA API Service Implementation',
        type: 'Feature',
        priority: 'High',
        completion: 95,
        layer: 35,
        phase: 18,
        actualHours: 24,
        description: 'Complete JIRA REST API service for real-time issue creation',
        acceptanceCriteria: [
          'Real-time JIRA API connectivity',
          'Secure credential management',
          'Progress tracking for issue creation',
          'Support for epics, stories, tasks, sub-tasks'
        ],
        labels: ['jira-api', 'rest', 'credentials', 'real-time']
      },
      {
        id: 'story-16',
        title: '44x21s Framework JIRA Mapping',
        type: 'Feature',
        priority: 'High',
        completion: 90,
        layer: 40,
        phase: 19,
        actualHours: 20,
        description: 'Complete mapping of project data to 44x21s framework structure',
        acceptanceCriteria: [
          '44 Layers mapped to technical architecture',
          '21 Phases mapped to development lifecycle',
          '800+ Quality checkpoints defined',
          'Layer×Phase coordinate system operational'
        ],
        labels: ['mapping', 'framework', 'architecture', 'lifecycle']
      },
      {
        id: 'story-17',
        title: 'Comprehensive Export Dashboard',
        type: 'Feature',
        priority: 'Medium',
        completion: 85,
        layer: 8,
        phase: 17,
        actualHours: 16,
        description: 'Interactive dashboard for JIRA export with statistics',
        acceptanceCriteria: [
          'Real-time export statistics',
          'Interactive progress tracking',
          'MT ocean theme applied',
          'Both CSV and API export modes'
        ],
        labels: ['dashboard', 'export', 'statistics', 'interactive']
      }
    ]
  }
];

// Enhanced statistics calculation
export const calculate44x21sStats = () => {
  let totalItems = 0;
  let completedItems = 0;
  let totalHours = 0;
  let actualHours = 0;
  const layerCoverage = new Set<number>();
  const phaseCoverage = new Set<number>();
  const priorities = { Highest: 0, High: 0, Medium: 0, Low: 0 };

  const processItem = (item: any) => {
    totalItems++;
    if (item.completion >= 100) completedItems++;
    totalHours += item.estimatedHours || 40;
    actualHours += item.actualHours || 0;
    
    if (item.layer) layerCoverage.add(item.layer);
    if (item.phase) phaseCoverage.add(item.phase);
    if (item.priority) priorities[item.priority as keyof typeof priorities]++;
    
    if (item.children) {
      item.children.forEach(processItem);
    }
  };

  enhancedProjectData44x21s.forEach(processItem);

  return {
    totalItems,
    completedItems,
    completionRate: Math.round((completedItems / totalItems) * 100),
    totalHours,
    actualHours,
    layerCoverage: Array.from(layerCoverage).sort((a, b) => a - b),
    phaseCoverage: Array.from(phaseCoverage).sort((a, b) => a - b),
    priorities,
    frameworkCoverage: {
      layers: Array.from(layerCoverage).length,
      phases: Array.from(phaseCoverage).length,
      totalLayers: 44,
      totalPhases: 21
    }
  };
};