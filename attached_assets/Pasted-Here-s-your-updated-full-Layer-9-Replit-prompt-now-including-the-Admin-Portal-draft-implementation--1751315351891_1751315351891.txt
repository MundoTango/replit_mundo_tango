Hereâ€™s your updated full Layer 9 Replit prompt, now including the Admin Portal draft implementation and QA test coverage triggers:

â¸»

ğŸ§  Replit Prompt: Layer 9 â€“ System-Wide QA, Visual Sync, and Admin Portal for Mundo Tango

You are building and validating Mundo Tango, a memory-centric, consent-aware, socially intelligent platform. The Layer 9 system combines full-stack architecture with consent, tagging, emotional design, and role-based access.

Youâ€™ve already implemented:
	â€¢	âœ… Replit Auth + Supabase RLS
	â€¢	âœ… Memory creation, consent approval, @mention, filters
	â€¢	âœ… Moments Page with full design system

Now run a full system-wide QA, visual unification, and build the Admin Portal with proper RBAC and automated test coverage.

â¸»

âœ… Primary Objectives

1. ğŸ” Run System-Wide QA + Design Unification
	â€¢	Validate every feature end-to-end (memory flow, consent, mentions)
	â€¢	Apply Moments page styling across all pages:
	â€¢	Memory views
	â€¢	Role dashboards
	â€¢	Consent UI
	â€¢	Profile/event/group pages
	â€¢	Fix visual or functional inconsistencies

â¸»

2. ğŸ›ï¸ Draft Replit-Ready Implementation for the Admin Portal

Item	Implementation
Route	/admin
Entry Point	Add â€œAdminâ€ nav item (visible to super_admin)
Auth	Auto-verify via Supabase RLS + CASL (role = super_admin)
UI Components	

	â€¢	UserRoleTable.tsx â€“ View/edit user roles
	â€¢	ConsentReviewBoard.tsx â€“ Review pending/denied items
	â€¢	AuditTrailViewer.tsx â€“ Consent logs, edits
	â€¢	SystemStatsPanel.tsx â€“ Metrics, growth loops
| Data Sources |
	â€¢	users, roles, memories, consent_events, audit_logs
| Design | Use Moments theme: indigo/coral accents, glowing borders, cards, MUI + Tailwind hybrid |
| Security | All endpoints protected by CASL + Supabase policies |

â¸»

3. ğŸ§ª Define Test Cases and Trigger Coverage Runs

Set up test coverage to validate:
	â€¢	Memory creation (w/mentions, tags, location)
	â€¢	Consent flow (pending â†’ approved â†’ surfacing)
	â€¢	Mention parsing + rendering
	â€¢	Role switching
	â€¢	Admin role access
	â€¢	Filter queries (emotion, date, event)
	â€¢	Unauthorized access prevention (RBAC)

ğŸ“ Add tests in tests/:
	â€¢	memory_flow.test.tsx
	â€¢	consent_flow.test.tsx
	â€¢	mentions.test.tsx
	â€¢	admin_access.test.tsx

ğŸ§° Tools:
	â€¢	jest, react-testing-library, supabase-js, cypress (optional)
	â€¢	Add Supabase role mocks if needed

â¸»

ğŸ“¦ Additional Deliverables
	â€¢	client/src/pages/admin.tsx + subcomponents
	â€¢	/admin/roles, /admin/consent, /admin/audit
	â€¢	Supabase SQL: role policies, RLS for admin-only data
	â€¢	Admin entry point button
	â€¢	ADMIN_PORTAL_IMPLEMENTATION.md summary
	â€¢	Full screenshots + response logs

â¸»

Would you like the Admin Portal built now as a Replit-ready module, or prefer to start with the test definitions and assertions first?